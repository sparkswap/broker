syntax = "proto3";

enum Side {
  BID = 0;
  ASK = 1;
}

enum TimeInForce {
  GTC = 0;
  FOK = 1;
  IOC = 2;
}

message CreateBlockOrderRequest {
  string market = 0;
  Side side = 1;
  int64 amount = 2;
  optional int64 price = 3;
  optional TimeInForce time_in_force = 4;
}

message CreateBlockOrderResponse {
  string block_order_id = 0;
}

enum BlockOrderStatus {
  ACTIVE = 0;
  CANCELLED = 1;
  COMPLETED = 2;
}

enum OrderStatus {
  CREATED = 0;
  PLACED = 1;
  FILLED = 2;
  EXECUTED = 3;
  COMPLETED = 4;
  REJECTED = 5;
}

message Order {
  string order_id = 0;
  OrderStatus order_status = 1;
  int64 amount = 2;
  int64 price = 3;
}

message GetBlockOrderRequest {
  string block_order_id = 0;
}

message GetBlockOrderResponse {
  BlockOrderStatus status = 0;

  string market = 10;
  Side side = 11;
  int64 amount = 12;
  optional int64 price = 13;
  optional TimeInForce time_in_force = 14;

  int64 fill_amount = 20;
  repeated Order open_orders = 21;
}

service OrderService {
  rpc CreateBlockOrder (CreateBlockOrderRequest) returns (CreateBlockOrderResponse);
  rpc GetBlockOrder (GetBlockOrderRequest) returns (GetBlockOrderResponse);
}
